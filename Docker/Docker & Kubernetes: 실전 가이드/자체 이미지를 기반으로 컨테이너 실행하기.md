## 자체 이미지를 기반으로 컨테이너 실행하기

Dockerfile의 명령에 따라 이미지를 만드려면 build 명령어를 사용해야 한다. Dockerfile을 기반으로 새 커스텀 이미지를 빌드하도록 도커에게 지시한다. Dockerfile을 찾을 수 있는 곳을 도커에게 알려줘야 한다. 여기에 '.'을 입력하여, 도커에게 이 명령을 실행하는 곳과 동일한 폴더에 Dockerfile이 존재함을 알린다. 이를 통해 생성된 ID를 복사한 다음 docker run 다음에 ID를 넣는다. Enter 키를 누르면 컨테이너가 시작되며 완료되지 않고 계속 실행되는 것을 볼 수 있다. 그 이유는 여기서 실행한 명령이 노드 서버를 시작하기 때문이다. 노드 서버는 완료되지 않고 진행 중인 프로세스가 된다. 컨테이너 또한 실행을 계속 유지한다. 하지만 localhost를 방문하면 웹사이트가 표시되지 않음을 알 수 있다. Dockerfile에 이 EXPOSE 80 명령이 있지만 실제론 이 명령은 도큐먼테이션 목적으로만 추가되었을 뿐이기 때문이다. 즉, 아무 것도 하지 않는다. 정말로 중요한 것은 컨테이너를 docker run으로 실행할 때 특별한 옵션을 추가해야 한다. 이 컨테이너를 실행할 때 플래그를 추가하는 것이다. 이미지 이름 앞의 -p 플래그를 넣어 도커에게 어떤 로컬 포트가 있는지 알려줄 수 있다. 우리의 로컬 머신의 어떤 포트가 이 내부의 도커 특정 포트에 액세스 할 수 있는지 말이다. p 다음 애플리케이션에 액세스하려는 로컬 포트를 지정한다. 3000으로 예를 들면, docker run -p 3000:80 ID 명령을 입력하면 된다.
